<!-- src/app/components/profile/profile.component.html -->
<div class="profile-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Profile Settings</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form
        [formGroup]="profileForm"
        (ngSubmit)="onSubmit()"
        class="profile-form"
      >
        <!-- System Data -->
        <div formGroupName="systemData" class="form-section">
          <h3>System Data</h3>
          <mat-form-field appearance="outline">
            <mat-label>Username</mat-label>
            <input matInput formControlName="username" disabled />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" />
            <mat-error
              *ngIf="profileForm.get('systemData')?.get('email')?.errors?.['required']"
              >Email is required</mat-error
            >
            <mat-error
              *ngIf="profileForm.get('systemData')?.get('email')?.errors?.['email']"
              >Please enter a valid email</mat-error
            >
          </mat-form-field>
        </div>

        <!-- Personal Data -->
        <div formGroupName="personalData" class="form-section">
          <h3>Personal Data</h3>
          <mat-form-field appearance="outline">
            <mat-label>First Name</mat-label>
            <input matInput formControlName="firstname" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Last Name</mat-label>
            <input matInput formControlName="lastname" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Sex</mat-label>
            <mat-select formControlName="sex">
              <mat-option value="male">Male</mat-option>
              <mat-option value="female">Female</mat-option>
              <mat-option value="other">Other</mat-option>
              <mat-option value="prefer-not-to-say"
                >Prefer not to say</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Address Data -->
        <div formGroupName="addressData" class="form-section">
          <h3>Address Data</h3>
          <mat-form-field appearance="outline">
            <mat-label>Address</mat-label>
            <input matInput formControlName="address" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Postal Code</mat-label>
            <input matInput formControlName="postalCode" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>City</mat-label>
            <input matInput formControlName="city" />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Country</mat-label>
            <input matInput formControlName="country" />
          </mat-form-field>
        </div>

        <div class="form-actions">
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="profileForm.invalid || loading"
          >
            Save Changes
          </button>
          <button mat-button routerLink="/tracker" type="button">Cancel</button>
        </div>
      </form>

      <!-- Message area -->
      <div *ngIf="successMessage" class="success-message">
        {{ successMessage }}
      </div>
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    </mat-card-content>
  </mat-card>
</div>
